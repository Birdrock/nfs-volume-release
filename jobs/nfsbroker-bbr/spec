---
# This job name should be unique, as several backup and restore scripts for different components could be collocated on the same machine.
# The directory structure will be organized by job name.
name: nfsbroker-bbr

templates:
  config.json.erb: config/config.json
  backup.sh.erb: bin/bbr/backup
  restore.sh.erb: bin/bbr/restore
  metadata.sh.erb: bin/bbr/metadata
  post-restore-unlock.sh.erb: bin/bbr/post-restore-unlock

packages: []

properties:
  nfsbroker.domain:
    description: 'Cloud Foundry system domain'
  nfsbroker.cf.admin_user:
    description: 'username of the CF admin user'
  nfsbroker.cf.admin_password:
    description: 'password of the CF admin user'
  nfsbroker.cf.client_id:
    description: 'ID of the CF client'
  nfsbroker.cf.client_secret:
    description: 'Secret of the CF client'
  nfsbroker.organization:
    description: 'organization that hosts the app'
  nfsbroker.space:
    description: 'space that hosts the app'
  nfsbroker.app_name:
    description: 'application name to use when pushing the broker to cloud foundry and setting the route'
    default: nfsbroker
  nfsbroker.skip_cert_verify:
    description: 'true if the cf api uses test certs that should not be verified'
    default: false
  nfsbroker.db_driver:
    default: ""
    description: "(optional) database driver name when using SQL to store broker state"
  nfsbroker.db_username:
    default: ""
    description: "(optional) database username when using SQL to store broker state"
  nfsbroker.db_password:
    default: ""
    description: "(optional) database password when using SQL to store broker state"
  nfsbroker.db_hostname:
    default: ""
    description: "(optional) database hostname when using SQL to store broker state"
  nfsbroker.db_port:
    default: ""
    description: "(optional) database port when using SQL to store broker state"
  nfsbroker.db_name:
    default: ""
    description: "(optional) database name when using SQL to store broker state"
  nfsbroker.db_ca_cert:
    default: ""
    description: "(optional) CA Cert to verify SSL connection, if not include, connection will be plain"
  nfsbroker.db_skip_hostname_validation:
    default: false
    description: "(optional) Skip verification of hostname in database TLS certificate"
  nfsbroker.release_level_backup:
    default: false
    description: "Enable bbr scripts"
